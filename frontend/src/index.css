@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* --- NEXUS LIGHT THEME (Solid Pearl White) --- */
    --background: 36 100% 98%;
    --foreground: 0 0% 0%;

    /* SOLID: Pearl White */
    --card: 36 100% 98%;
    --card-foreground: 0 0% 0%;

    --popover: 36 100% 98%;
    --popover-foreground: 0 0% 0%;

    /* --- BRAND COLORS --- */
    --defense-blue: 224 100% 50%;
    --defense-blue-glow: 224 100% 70%;
    
    --offense-red: 0 100% 55%; 
    --offense-red-glow: 0 100% 75%;

    --primary: 224 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 36 100% 98%;
    --secondary-foreground: 0 0% 0%;

    --muted: 33 33% 91%;
    --muted-foreground: 0 0% 25%;

    --accent: 33 33% 91%;
    --accent-foreground: 0 0% 0%;

    --destructive: 0 100% 55%;
    --destructive-foreground: 0 0% 100%;

    --border: 33 33% 91%;
    --input: 33 33% 91%;
    --ring: 224 100% 50%;
    --radius: 0.75rem;

    /* Force variables to match card for consistency */
    --glass-bg: 36 100% 98%; 
    --glass-border: 0 0% 0% / 0.1;
    --grid-color: 0 0% 0% / 0.05;
  }

  .dark {
    /* --- NEXUS DARK THEME (Solid True Black) --- */
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;

    /* SOLID: True Black */
    --card: 0 0% 0%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 0%;
    --popover-foreground: 0 0% 98%;

    --primary: 224 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 8%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 8%;
    --muted-foreground: 0 0% 63%;

    --accent: 0 0% 12%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 100% 55%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 12%;
    --input: 0 0% 12%;
    --ring: 224 100% 50%;

    --defense-blue: 224 100% 50%;
    --defense-blue-glow: 224 100% 65%;
    --offense-red: 0 100% 55%;
    --offense-red-glow: 0 100% 65%;
    
    --glass-bg: 0 0% 0%; 
    --glass-border: 0 0% 100% / 0.1;
    --grid-color: 224 100% 50% / 0.15;
  }

  /* --- GLOBAL RED SCROLLBAR --- */

  /* 1. Firefox Support */
  * {
    scrollbar-width: thin;
    scrollbar-color: #dc2626 hsl(var(--background));
  }

  /* 2. WebKit Browsers (Chrome, Edge, Safari) */
  
  /* Width of the scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px; /* Height for horizontal scrollbars */
  }

  /* The Track (Background) - Dynamic Theme Color */
  ::-webkit-scrollbar-track {
    background: hsl(var(--background)); /* Automatically turns Black in Dark Mode, White in Light Mode */
  }

  /* The Thumb (The moving red part) */
  ::-webkit-scrollbar-thumb {
    background-color: #dc2626; /* Vibrant Sentinel Red */
    border-radius: 9999px; /* Pill shape */
    
    /* This border creates a "floating" effect by masking the edges with the background color */
    border: 2px solid hsl(var(--background)); 
  }

  /* Hover State - Slightly darker red */
  ::-webkit-scrollbar-thumb:hover {
    background-color: #b91c1c; 
  }

}

@layer base {
  * { @apply border-border; }
  body { 
    @apply bg-background text-foreground antialiased; 
    font-family: 'Inter', system-ui, sans-serif; 
    margin: 0;
    padding: 0;
  }
  h1, h2, h3, h4, h5, h6 { font-family: 'Space Grotesk', system-ui, sans-serif; }
  
  /* Strictly enforce footer background */
  footer {
    background-color: hsl(var(--card)) !important;
    border-top: 1px solid hsl(var(--border));
    /* Lift footer above any potential loose grid lines */
    position: relative;
    z-index: 10;
  }
}

@layer components {
  section {
    @apply !py-8 md:!py-10;
  }

  /* --- FORCED SOLID CARD STYLES --- */
  .glass { 
    @apply border shadow-sm;
    background-color: hsl(var(--card)) !important; 
    border-color: hsl(var(--glass-border));
    backdrop-filter: none !important;
    opacity: 1 !important;
    
    /* Ensure cards sit above the grid */
    position: relative; 
    z-index: 5;
  }
  
  .glass-card { 
    @apply glass rounded-2xl;
    background-color: hsl(var(--card)) !important;
    position: relative;
    z-index: 5;
  }

  /* --- GRID BACKGROUND ANIMATION --- */
  .grid-background {
    /* Create a stacking context so -1 children stay within this container */
    position: relative;
    z-index: 0;
    
    background-size: 40px 40px;
    background-image: 
      linear-gradient(to right, hsl(var(--grid-color)) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--grid-color)) 1px, transparent 1px);
    background-repeat: repeat;
    background-position: center top;
  }

  /* CRITICAL FIX: 
     z-index: -1 places the grid lines BEHIND the content (Navbar, Main, Footer),
     but IN FRONT of the background color of the .grid-background container.
  */
  .grid-background::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1; 
    
    background-size: 40px 40px;
    background-image: 
      linear-gradient(to right, hsl(var(--defense-blue) / 0.2) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--defense-blue) / 0.2) 1px, transparent 1px);
    background-repeat: repeat;
    background-position: center top;
    opacity: 0;
    animation: grid-pulse-blue 8s ease-in-out infinite;
    pointer-events: none;
  }

  .grid-background::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1; 

    background-size: 40px 40px;
    background-image: 
      linear-gradient(to right, hsl(var(--offense-red) / 0.2) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--offense-red) / 0.2) 1px, transparent 1px);
    background-repeat: repeat;
    background-position: center top;
    opacity: 0;
    animation: grid-pulse-red 8s ease-in-out infinite;
    pointer-events: none;
  }

  /* --- TERMINAL & BENTO COMPONENTS --- */
  .terminal-window {
    @apply rounded-xl border border-white/10 overflow-hidden font-mono text-sm shadow-2xl;
    background-color: #0f1117 !important; 
    position: relative;
    z-index: 5;
  }

  .terminal-header {
    @apply flex items-center gap-2 px-4 py-3 bg-[#1a1d26] border-b border-white/5;
  }

  .terminal-dot {
    @apply w-3 h-3 rounded-full;
  }

  .feature-card-blue {
    @apply glass-card hover:border-sentinel-blue/50 hover:shadow-[0_0_30px_hsl(var(--defense-blue)/0.15)] transition-all duration-300;
  }

  .feature-card-red {
    @apply glass-card hover:border-sentinel-red/50 hover:shadow-[0_0_30px_hsl(var(--offense-red)/0.15)] transition-all duration-300;
  }
}

@layer utilities {
  @keyframes grid-pulse-blue {
    0% { opacity: 0; }
    25% { opacity: 1; }
    50% { opacity: 0; }
    100% { opacity: 0; }
  }

  @keyframes grid-pulse-red {
    0% { opacity: 0; }
    50% { opacity: 0; }
    75% { opacity: 1; }
    100% { opacity: 0; }
  }
}